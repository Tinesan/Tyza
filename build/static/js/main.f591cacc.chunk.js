(this.webpackJsonptyza=this.webpackJsonptyza||[]).push([[3],{112:function(n,t,e){n.exports=e(138)},117:function(n,t,e){},138:function(n,t,e){"use strict";e.r(t);var r=e(0),a=e.n(r),o=e(27),c=e.n(o),i=(e(117),e(77));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(i.b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))},37:function(n,t,e){"use strict";e.d(t,"a",(function(){return c}));var r=e(45),a=e(0),o=e.n(a),c=o.a.createContext({isAdmin:!1,authData:void 0,setAuthData:function(){}});t.b=function(n){var t=n.children,e=Object(a.useState)(void 0),i=Object(r.a)(e,2),u=i[0],d=i[1],s=sessionStorage.getItem("login");if(s&&!u){var l=JSON.parse(s);"accessToken"in l&&d(l)}var f=!!(null===u||void 0===u?void 0:u.authorities.includes("ROLE_ADMIN"));return o.a.createElement(c.Provider,{value:{isAdmin:f,authData:u,setAuthData:d}},t)}},46:function(n,t,e){"use strict";e.d(t,"a",(function(){return c})),e.d(t,"c",(function(){return i}));var r=e(0),a=e.n(r),o=e(71),c=a.a.createContext({products:[],categories:[],dataProviderLoading:!1,refetchCategoriesAndProducts:function(){}});function i(n,t){return n.name>t.name?1:n.name<t.name?-1:0}t.b=function(n){var t=n.children,e=Object(o.f)(),i=e.data,u=e.refetch,d=e.loading,s=Object(r.useMemo)((function(){if((null===i||void 0===i?void 0:i.listCategory)&&i.listProduct){var n=i.listCategory;return{products:i.listProduct,categories:n}}return{products:[],categories:[]}}),[i]),l=s.products,f=s.categories;return a.a.createElement(c.Provider,{value:{products:l,categories:f,dataProviderLoading:d,refetchCategoriesAndProducts:u}},t)}},70:function(n,t,e){"use strict";e.d(t,"a",(function(){return u}));var r=e(34),a=e(45),o=e(0),c=e.n(o),i=e(46),u=c.a.createContext({totalPrice:0,deliveryPrice:0,basketValues:{},clearBasket:function(){},addBasketValue:function(){},deleteBasketValue:function(){}});t.b=function(n){var t=n.children,e=Object(o.useContext)(i.a).products,d=Object(o.useState)({}),s=Object(a.a)(d,2),l=s[0],f=s[1],m=Object(o.useMemo)((function(){var n=Object.keys(l),t=!!n.length,r=0;return t&&n.forEach((function(n){var t=e.find((function(t){return t.id===n}));t&&(r+=t.price*l[n])})),+r.toFixed(2)}),[l,e]),g=Object(o.useMemo)((function(){return m>=40?0:4}),[m]);return c.a.createElement(u.Provider,{value:{totalPrice:m,clearBasket:function(){f({})},basketValues:l,deliveryPrice:g,addBasketValue:function(n){f((function(t){return Object(r.a)(Object(r.a)({},t),n)}))},deleteBasketValue:function(n){if(l[n]){var t=Object(r.a)({},l);delete t[n],f(t)}}}},t)}},71:function(n,t,e){"use strict";e.d(t,"d",(function(){return C})),e.d(t,"e",(function(){return D})),e.d(t,"g",(function(){return A})),e.d(t,"m",(function(){return B})),e.d(t,"a",(function(){return x})),e.d(t,"h",(function(){return z})),e.d(t,"f",(function(){return Q})),e.d(t,"k",(function(){return R})),e.d(t,"j",(function(){return F})),e.d(t,"c",(function(){return W})),e.d(t,"n",(function(){return _})),e.d(t,"b",(function(){return K})),e.d(t,"l",(function(){return Y})),e.d(t,"i",(function(){return nn}));var r=e(11),a=e(4);function o(){var n=Object(r.a)(["\n    mutation DeleteProduct($id: String!) {\n  deleteProduct(productId: $id) {\n    status\n  }\n}\n    "]);return o=function(){return n},n}function c(){var n=Object(r.a)(["\n    query Product($id: String!) {\n  productById(productId: $id) {\n    ...ProductItem\n  }\n}\n    ",""]);return c=function(){return n},n}function i(){var n=Object(r.a)(["\n    mutation AddNewImages($images: [Upload!]!, $productId: String!) {\n  addNewImages(images: $images, productId: $productId) {\n    id\n    images {\n      id\n    }\n  }\n}\n    "]);return i=function(){return n},n}function u(){var n=Object(r.a)(["\n    mutation UpdateProduct($id: String!, $name: String!, $position: Int!, $stock: Boolean!, $costPer: String!, $price: BigDecimal!, $categoryId: String!, $description: String!) {\n  updateProduct(productId: $id, productInputDTO: {name: $name, stock: $stock, price: $price, costPer: $costPer, position: $position, categoryId: $categoryId, description: $description}) {\n    id\n  }\n}\n    "]);return u=function(){return n},n}function d(){var n=Object(r.a)(["\n    mutation AddNewProduct($name: String!, $position: Int!, $stock: Boolean!, $costPer: String!, $price: BigDecimal!, $categoryId: String!, $description: String!) {\n  saveNewProduct(productInputDTO: {name: $name, price: $price, stock: $stock, costPer: $costPer, position: $position, categoryId: $categoryId, description: $description}) {\n    id\n  }\n}\n    "]);return d=function(){return n},n}function s(){var n=Object(r.a)(["\n    query FindAllOrders($page: String, $size: String, $sort: String) {\n  findAllOrders(page: $page, size: $size, sort: $sort) {\n    content {\n      ...OrderContentItem\n    }\n    last\n    first\n    number\n    totalPages\n    totalElements\n  }\n}\n    ",""]);return s=function(){return n},n}function l(){var n=Object(r.a)(["\n    mutation PlaceOrder($comment: String!, $deliveryTime: String!, $customer: CustomerInputDTO!, $productOrderLines: [ProductOrderLineInputDTO!]!) {\n  placeOrder(productOrderInputDTO: {comment: $comment, customer: $customer, productOrderLines: $productOrderLines, deliveryTime: $deliveryTime}) {\n    id\n  }\n}\n    "]);return l=function(){return n},n}function f(){var n=Object(r.a)(["\n    query CategoriesAndProducts {\n  listCategory {\n    ...CategoryItem\n  }\n  listProduct {\n    ...ProductItem\n  }\n}\n    ","\n",""]);return f=function(){return n},n}function m(){var n=Object(r.a)(["\n    mutation DeleteCategory($id: String!) {\n  deleteCategory(categoryId: $id) {\n    status\n  }\n}\n    "]);return m=function(){return n},n}function g(){var n=Object(r.a)(["\n    mutation AddNewCategory($name: String!, $description: String!) {\n  saveNewCategory(categoryInputDTO: {name: $name, description: $description}) {\n    id\n  }\n}\n    "]);return g=function(){return n},n}function p(){var n=Object(r.a)(["\n    mutation UpdateCategory($id: String!, $name: String!, $description: String!) {\n  updateCategory(categoryId: $id, categoryInputDTO: {name: $name, description: $description}) {\n    id\n  }\n}\n    "]);return p=function(){return n},n}function v(){var n=Object(r.a)(["\n    query Category($id: String!) {\n  categoryById(categoryId: $id) {\n    ...CategoryItem\n  }\n}\n    ",""]);return v=function(){return n},n}function O(){var n=Object(r.a)(["\n    query callRequest($name: String!, $phone: String!) {\n  callRequest(callRequestInput: {name: $name, phone: $phone}) {\n    status\n  }\n}\n    "]);return O=function(){return n},n}function b(){var n=Object(r.a)(["\n    query authenticate($username: String!, $password: String!) {\n  authenticate(credentialsInput: {username: $username, password: $password}) {\n    ...AuthenticateData\n  }\n}\n    ",""]);return b=function(){return n},n}function h(){var n=Object(r.a)(["\n    fragment ProductItem on ProductDTO {\n  id\n  name\n  stock\n  price\n  costPer\n  position\n  categoryId\n  description\n  images {\n    id\n    uri\n    name\n    main\n    productId\n  }\n}\n    "]);return h=function(){return n},n}function $(){var n=Object(r.a)(["\n    fragment OrderContentItem on ProductOrderDTO {\n  id\n  deliveryTime\n  deliveryTime\n  createdDate\n  customer {\n    id\n    name\n    phone\n    street\n    house\n    building\n    frontDoor\n    floor\n    flat\n  }\n  productOrderLines {\n    id\n    productId\n    name\n    price\n    description\n    costPer\n    orderQuantity\n  }\n}\n    "]);return $=function(){return n},n}function y(){var n=Object(r.a)(["\n    fragment CategoryItem on CategoryDTO {\n  id\n  name\n  description\n}\n    "]);return y=function(){return n},n}function j(){var n=Object(r.a)(["\n    fragment AuthenticateData on OAuth2AccessTokenDTO {\n  tokenType\n  accessToken\n  authorities\n  authenticationName\n}\n    "]);return j=function(){return n},n}var I=Object(a.gql)(j()),P=Object(a.gql)(y()),E=Object(a.gql)($()),S=Object(a.gql)(h()),k=Object(a.gql)(b(),I);function C(n){return a.useQuery(k,n)}var q=Object(a.gql)(O());function D(n){return a.useQuery(q,n)}var w=Object(a.gql)(v(),P);function A(n){return a.useQuery(w,n)}var T=Object(a.gql)(p());function B(n){return a.useMutation(T,n)}var M=Object(a.gql)(g());function x(n){return a.useMutation(M,n)}var L=Object(a.gql)(m());function z(n){return a.useMutation(L,n)}var N=Object(a.gql)(f(),P,S);function Q(n){return a.useQuery(N,n)}var V=Object(a.gql)(l());function R(n){return a.useMutation(V,n)}var U=Object(a.gql)(s(),E);function F(n){return a.useQuery(U,n)}var J=Object(a.gql)(d());function W(n){return a.useMutation(J,n)}var G=Object(a.gql)(u());function _(n){return a.useMutation(G,n)}var H=Object(a.gql)(i());function K(n){return a.useMutation(H,n)}var X=Object(a.gql)(c(),S);function Y(n){return a.useQuery(X,n)}var Z=Object(a.gql)(o());function nn(n){return a.useMutation(Z,n)}},77:function(n,t,e){"use strict";e.d(t,"a",(function(){return V}));var r=e(0),a=e.n(r),o=e(47),c=e(75),i=e(99),u=e(100),d=e(108),s=e(107),l=e(140),f=e(141),m=e(139),g=function(n){Object(d.a)(e,n);var t=Object(s.a)(e);function e(){var n;Object(i.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=t.call.apply(t,[this].concat(a))).state={hasError:!1},n}return Object(u.a)(e,[{key:"componentDidCatch",value:function(n,t){console.error("Uncaught error:",n,t)}},{key:"render",value:function(){return this.state.hasError?a.a.createElement(l.a,null,a.a.createElement(f.a,null,a.a.createElement(m.a,null,"Sorry.. there was an error"))):this.props.children}}],[{key:"getDerivedStateFromError",value:function(n){return{hasError:!0}}}]),e}(r.Component),p=e(34),v=e(4),O=e(101),b=e(104),h=e(105),$=e(37),y=window.location.hostname,j=Object(h.a)({uri:"https://".concat(y,":5003/graphql/")}),I=Object(b.a)((function(n){var t=n.graphQLErrors,e=n.networkError;t&&t.map((function(n){var t=n.message,e=n.locations,r=n.path;return console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(e,", Path: ").concat(r))})),e&&console.log("[Network error]: ".concat(e))})),P=function(n){var t=n.children,e=function(){var n=Object(r.useContext)($.a).authData,t=Object(O.a)((function(t,e){var r=e.headers,a=null===n||void 0===n?void 0:n.accessToken;return{headers:Object(p.a)(Object(p.a)({},r),{},{authorization:a?"Bearer ".concat(a):""})}}));return new v.ApolloClient({link:Object(v.from)([I,t,j]),cache:new v.InMemoryCache})}();return a.a.createElement(v.ApolloProvider,{client:e},t)},E=e(70),S=e(46),k=e(11),C=e(142),q=e(12),D=e(69),w=e(72),A=function(n){var t=n.isAuth,e=n.children,r=Object(w.a)(n,["isAuth","children"]);return a.a.createElement(q.b,Object.assign({},r,{render:function(){return t?e:a.a.createElement(q.a,{to:"/"})}}))};function T(){var n=Object(k.a)(["\n  display: flex;\n  flex-grow: 1;\n  align-items: center;\n  justify-content: center;\n"]);return T=function(){return n},n}var B=a.a.lazy((function(){return Promise.all([e.e(1),e.e(6),e.e(7)]).then(e.bind(null,259))})),M=a.a.lazy((function(){return Promise.all([e.e(2),e.e(9)]).then(e.bind(null,263))})),x=a.a.lazy((function(){return Promise.all([e.e(0),e.e(2),e.e(1),e.e(11)]).then(e.bind(null,260))})),L=a.a.lazy((function(){return Promise.all([e.e(0),e.e(10),e.e(8)]).then(e.bind(null,261))})),z=D.b.div(T()),N=a.a.createElement(z,null,a.a.createElement(C.a,{animation:"grow",variant:"primary"})),Q=function(){var n,t=Object(r.useContext)($.a).authData,e=null===(n=Object(q.h)().state)||void 0===n?void 0:n.modal,o=!!t;return a.a.createElement(r.Suspense,{fallback:N},a.a.createElement(q.d,null,a.a.createElement(q.b,{component:B,exact:!0,path:"/"}),a.a.createElement(q.b,{path:"/login",exact:!0,component:M}),a.a.createElement(A,{path:"/admin",isAuth:o},a.a.createElement(x,null)),a.a.createElement(q.b,{render:function(){return a.a.createElement(q.a,{to:"/"})}})),e?a.a.createElement(q.b,{path:"/",component:L}):null)},V=(e(134),e(135),e(136),"https://");t.b=function(){return a.a.createElement(g,null,a.a.createElement(c.ToastProvider,null,a.a.createElement($.b,null,a.a.createElement(P,null,a.a.createElement(S.b,null,a.a.createElement(E.b,null,a.a.createElement(o.a,null,a.a.createElement(Q,null))))))))}}},[[112,4,5]]]);
//# sourceMappingURL=main.f591cacc.chunk.js.map